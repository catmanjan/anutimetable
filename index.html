<!DOCTYPE html>
<html>
<head>
  <title>ANU timetable builder</title>
  <script src="js/underscore.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/typeahead.bundle.min.js"></script>
  <script src="js/download.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/timetable.js" defer></script>
  <script src="js/timetable_analyser.js"></script>
  <link rel="shortcut icon" href="favicon.ico" />
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <meta charset="utf-8">
  <meta name="description" content="Intuitive timetable builder for the Australian National University.">
</head>
<body>

<div class="container">
  <div class="row">
    <div class="col-sm-10 col-md-10">
      <h1>ANU timetable builder</h1>
      <p>Updated for 2016.</p>
      <p><i>Courses chosen: <span id="chosenCourses">Loading data from data/timetable.json...</span>
        <span id="courses" style="display: inline;"></span></i></p>
    </div>

    <div class="col-xs-12">
      <div class="well form-inline">
        <input type="text" id="course-name" class="form-control" style="width:325px" placeholder="Enter a course code here (for example LAWS1201)">
        <div class="btn-group">
          <button id="add-course" class="btn btn-default">Add</button>
          <button id="clear-courses" class="btn btn-default">Clear</button>
        </div>
        <button id="load" class="btn btn-primary hide">Load data from .json</button>
        <input type="file" id="file" class="hide">
        <button id="download" class="btn btn-info pull-right">Download as .ics</button>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <div id="cal-container"></div>
      <p>Calendar downloads currently don't work in Safari. Report bugs to <a href="mailto:jan.ramon.martin@gmail.com">Jan Martin</a> or the <a href="https://github.com/catmanjan/anutimetable" target="_blank">ANU timetable builder GitHub project</a>.</p>
    </div>
  </div>

  <script>
    if(window.location.protocol !== 'file:') {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-64755004-1', 'auto');
      ga('send', 'pageview');
    }
  </script>

</div>

<script type="text/template" id="cal-header">
  BEGIN:VCALENDAR
  PRODID:-//Google Inc//Google Calendar 70.9054//EN
  VERSION:2.0
  CALSCALE:GREGORIAN
  METHOD:PUBLISH
  X-WR-CALNAME:ANU Semester 1
  X-WR-TIMEZONE:Australia/Sydney
  X-WR-CALDESC:This is the classes for semester 1.

</script>

<script type="text/template" id="event-template">
  BEGIN:VEVENT
  DTSTART;TZID=Australia/Sydney:201602<%= first_day %>T<%= padded_hour %>00
  DTEND;TZID=Australia/Sydney:201602<%= first_day %>T<%= padded_end_hour %>00
  RRULE:FREQ=WEEKLY;COUNT=15;BYDAY=<%= day.slice(0,2).toUpperCase() %>
  EXDATE;TZID=Australia/Sydney:201604<%= holiday2 %>T<%= padded_hour %>00
  EXDATE;TZID=Australia/Sydney:201604<%= holiday1 %>T<%= padded_hour %>00
  DTSTAMP:20160119T180209Z
  CREATED:20160119T172444Z
  DESCRIPTION:<%= description %>
  LAST-MODIFIED:20160119T172540Z
  LOCATION:<%= location %>
  SEQUENCE:1
  UID:buck_anu2016s1_<%= course %>
  STATUS:CONFIRMED
  SUMMARY:<%= course %>
  TRANSP:OPAQUE
  END:VEVENT
</script>

<script type="text/template" id="compulsary-event-template">
  <div class='lesson' data-eventtype='compulsary'
       data-name='<%= item.name %>'>
    <strong><%= item.name %></strong>.
    <em><%= item.location %></em>.
    <%= item.info %>.
    <i><%= Tools.pad(Math.floor(item.start), 2) + ':' + (item.start == Math.floor(item.start) ? '0' : '3') + '0-' +
      Math.floor(item.start + item.dur) + ':' + (item.start + item.dur == Math.floor(item.start + item.dur) ? '0' : '3') + '0' %></i>
  </div>
</script>

<script type="text/template" id="group-event-template">
  <div class='lesson' data-eventtype='group'
       data-group='<%= item.name + filterNumbers(item.info) %>'
       data-fgroup='<%= item.name + item.info %>'
       data-name='<%= item.name %>'>
    <strong><%= item.name %></strong>.
    <em><%= item.location %></em>.
    <%= item.info %>.
    <i><%= Tools.pad(Math.floor(item.start), 2) + ':' + (item.start == Math.floor(item.start) ? '0' : '3') + '0-' +
      Math.floor(item.start + item.dur) + ':' + (item.start + item.dur == Math.floor(item.start + item.dur) ? '0' : '3') + '0' %></i><br>
    <a class="choose" href>(choose)</a>
  </div>
</script>

<script type="text/template" id="calendar-template">
  <% var days = ["mon", "tue", "wed", "thu", "fri"]; %>

  <table class="table table-striped table-condensed">
    <tbody>
    <tr>
      <td class="col-sm-1"></td>
      <% for (var i = 0; i < 5; i++) { %>
      <th class="col-sm-2"><%= days[i] %></th>
      <% } %>
    </tr>

    <% for (var hour = start_hour; hour < end_hour; hour += 0.5) { %>
    <tr class="timetable-row" data-hour="<%= hour %>"
    <% if (hour < normal_start_hour || hour >= normal_end_hour) { %>
    style='display:none'
    <% } %>
    >
    <th>
      <%= Tools.pad(Math.floor(hour), 2) %>:<%= hour == Math.floor(hour) ? '0' : '3' %>0
    </th>
    <% for (var i = 0; i < 5; i++) { %>
    <td class="timeslot" data-hour="<%= hour %>" data-day="<%= days[i] %>" data-index="-1">
    </td>
    <% } %>
    </tr>
    <% } %>
    </tbody>
  </table>
</script>



</body>
</html>
